version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*

customHeaders:
  - pattern: sw.js
    headers:
      - key: Service-Worker-Allowed
        value: /
      - key: Cache-Control
        value: no-cache, no-store, must-revalidate
  - pattern: manifest.json
    headers:
      - key: Cache-Control
        value: public, max-age=86400
  - pattern: index.html
    headers:
      - key: Cache-Control
        value: no-cache, no-store, must-revalidate
  - pattern: '**/*.js'
    headers:
      - key: Cache-Control
        value: public, max-age=31536000
  - pattern: '**/*'
    headers:
      - key: X-Frame-Options
        value: DENY
      - key: X-Content-Type-Options
        value: nosniff
